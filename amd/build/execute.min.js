define(["jquery","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d){return{init:function(){var b=function(b,c,d,e){var f="";"check_all"==d?a('input[class="section"]:not(:checked)').each(function(){a(this).click()}):"uncheck_all"==d?a('input[class="section"]:checked').each(function(){a(this).click()}):(d.indexOf("move2tab")>-1&&(f=d.substr(d.length-1),d="move2tab"),a.ajax({url:"execute.php",type:"POST",data:{courseid:b,command:d,params:f,sections:c},success:function(a){""!==a&&(console.log("Execution result:\n"+a),window.location=e)}}))},e=function(){a(".dropdown-item").on("click",function(){var e=a("#courseid").val(),f=a("#returnurl").val(),g=a(this).attr("confirm_txt");console.log("course ID = "+e);var h=[];a('input[class="section"]:checked').each(function(){h.push(a(this).val()),console.log(a(this).val())}),h=JSON.stringify(h),console.log(h);var i=a(this).attr("value");if(""===g)b(e,h,i,f);else{var j=a(".dropdown-item");c.create({title:"Please confirm",body:"<p>"+g+"</p>",type:c.types.SAVE_CANCEL},j).done(function(a){a.getRoot().on(d.save,function(a){a.preventDefault(),b(e,h,i,f)})})}}),a("#btn_cancel").on("click",function(){window.location=a("#returnurl").val()})},f=function(){a("#btn_checkall").on("click",function(){a('input[class="section"]:not(:checked)').each(function(){a(this).click()})})},g=function(){a("#btn_uncheckall").on("click",function(){a('input[class="section"]:checked').each(function(){a(this).click()})})},h=function(){a("#btn_test").on("click",function(){var b=a("#btn_test");c.create({title:"test title",body:"<p>test body content</p>",type:c.types.SAVE_CANCEL},b).done(function(a){a.getRoot().on(d.save,function(a){a.preventDefault(),console.log("modal saving here..")})})})},i=function(){h(),e(),f(),g(),a(".dropdown-toggle").dropdown()};a(document).ready(function(){console.log("=================< execute.js >=================="),i()})}}});