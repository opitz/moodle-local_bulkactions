define(["jquery","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d){return{init:function(){var b=function(b,c,d){var e=[];a('input[class="section"]:checked').each(function(){e.push(a(this).val()),console.log(a(this).val())}),e=JSON.stringify(e),console.log(e);var f="";d.indexOf("move2tab")>-1&&(f=d.substr(d.length-1),d="move2tab"),a.ajax({url:"execute.php",type:"POST",data:{courseid:c,command:d,params:f,sections:e},success:function(a){""!==a&&(console.log("Execution result:\n"+a),window.location=b)}})},e=function(){a(".dropdown-item").on("click",function(){var e=a("#courseid").val(),f=a("#returnurl").val();a(this).html();console.log("course ID = "+e);var g=a(this).attr("value");if(""===g)a("#message").html("Please select an Action");else{var h=a(".dropdown-item");c.create({title:"Please confirm",body:"<p>Do you really want to do this?</p>",type:c.types.SAVE_CANCEL},h).done(function(a){a.getRoot().on(d.save,function(a){a.preventDefault(),console.log("executing now..."),b(f,e,g)})})}}),a("#btn_cancel").on("click",function(){window.location=a("#returnurl").val()})},f=function(){a("#btn_test").on("click",function(){var b=a("#btn_test");c.create({title:"test title",body:"<p>test body content</p>",type:c.types.SAVE_CANCEL},b).done(function(a){a.getRoot().on(d.save,function(a){a.preventDefault(),console.log("modal saving here..")})})})},g=function(){f(),e(),a(".dropdown-toggle").dropdown()};a(document).ready(function(){console.log("=================< execute.js >=================="),g()})}}});