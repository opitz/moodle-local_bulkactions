define(["jquery","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d){return{init:function(){var b=function(b,c,d,e){var f="";"check_all"==d?a('input[class="section"]:not(:checked)').each(function(){a(this).click()}):"uncheck_all"==d?a('input[class="section"]:checked').each(function(){a(this).click()}):(d.indexOf("move2tab")>-1&&(f=d.substr(d.length-1),d="move2tab"),console.log("courseID = "+b),console.log("command = "+d),a.ajax({url:"execute.php",type:"POST",data:{courseid:b,command:d,params:f,sections:c},success:function(a){""!==a?console.log("Execution result:\n"+a):console.log("Execution failed!\n"),window.location=e},error:function(a){console.log(a)}}))},e=function(){a(".dropdown-item").on("click",function(){var e=a("#courseid").val(),f=a("#returnurl").val(),g=a(this).attr("value"),h=a(this).attr("confirm_txt"),i=a(this).attr("no_section_check");console.log("course ID = "+e);var j=[];if(a('input[class="section"]:checked').each(function(){j.push(a(this).val()),console.log(a(this).val())}),0===j.length&&"1"!==i)c.create({type:c.types.CANCEL,title:"No Topic selected",body:"Please select at least one topic for this action."}).then(function(a){a.show()});else if(j=JSON.stringify(j),console.log(j),""===h||h===!1)b(e,j,g,f);else{var k=a(".dropdown-item");c.create({title:"Please confirm",body:"<p>"+h+"</p>",type:c.types.SAVE_CANCEL},k).done(function(a){console.log(a),a.getRoot().on(d.save,function(a){a.preventDefault(),b(e,j,g,f)})})}}),a("#btn_cancel").on("click",function(){window.location=a("#returnurl").val()})},f=function(){a("#btn_checkall").on("click",function(){a('input[class="section"]:not(:checked)').each(function(){a(this).click()})})},g=function(){a("#btn_uncheckall").on("click",function(){a('input[class="section"]:checked').each(function(){a(this).click()})})},h=function(){e(),f(),g()};a(document).ready(function(){console.log("=================< execute.js >=================="),h()})}}});