define ("local_bulkactions/execute",["jquery","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d){return{init:function init(){var b=function(b,c,d,e){var f="";if("check_all"==d){a("input[class=\"section\"]:not(:checked)").each(function(){a(this).click()})}else if("uncheck_all"==d){a("input[class=\"section\"]:checked").each(function(){a(this).click()})}else{if(-1<d.indexOf("move2tab")){f=d.substr(8);d="move2tab"}console.log("courseID = "+b);console.log("command = "+d);console.log("param = "+f);a.ajax({url:"execute.php",type:"POST",data:{courseid:b,command:d,param:f,sections:c},success:function success(a){if(""!==a){console.log("Execution result:\n"+a)}else{console.log("Execution failed!\n")}window.location=e},error:function error(a){console.log(a)}})}},e=function(){a(".dropdown-item").on("click",function(){var f=a("#courseid").val(),g=a("#returnurl").val(),h=a(this).attr("value"),i=a(this).attr("confirm_txt"),j=a(this).attr("no_section_check");console.log("course ID = "+f);console.log("command = "+h);console.log("confirmation = "+i);var k=[];a("input[class=\"section\"]:checked").each(function(){k.push(a(this).val());console.log("=> section checked: "+a(this).val())});if(0===k.length&&"1"!==j){c.create({type:c.types.CANCEL,title:"No Topic selected",body:"Please select at least one topic for this action."}).then(function(a){a.show()})}else{k=JSON.stringify(k);console.log(k);if(""===i||!1===i){b(f,k,h,g)}else{c.create({title:"Please confirm",body:"<p>"+i+"</p>",type:c.types.SAVE_CANCEL}).done(function(a){a.show();console.log(a);a.getRoot().on(d.save,function(a){a.preventDefault();b(f,k,h,g)})})}}});a("#btn_cancel").on("click",function(){window.location=a("#returnurl").val()})},f=function(){a("#btn_checkall").on("click",function(){a("input[class=\"section\"]:not(:checked)").click()})},g=function(){a("#btn_uncheckall").on("click",function(){a("input[class=\"section\"]:checked").each(function(){a(this).click()})})},h=function(){a(".is_hiding").on("click",function(b){if(b.altKey){a(".is_hiding").parent().find(".section").click()}});a(".tablocation").on("click",function(b){var c=a(this);if(b.altKey){console.log(c.attr("value"));var d=c.attr("value");a(".tablocation[value='"+d+"']").parent().find(".section").click()}})},i=function(){e();f();g();h()};a(document).ready(function(){console.log("=================< execute.js >==================");i()})}}});
//# sourceMappingURL=execute.min.js.map
